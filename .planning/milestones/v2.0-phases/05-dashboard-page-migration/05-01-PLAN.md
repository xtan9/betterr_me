---
phase: 05-dashboard-page-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/dashboard/dashboard-content.tsx
  - components/dashboard/daily-snapshot.tsx
  - components/dashboard/motivation-message.tsx
  - app/dashboard/loading.tsx
  - tests/components/dashboard/daily-snapshot.test.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard greeting section renders inside a white Card with bg-card styling"
    - "Motivation message renders inside its own separate Card (not merged with greeting)"
    - "Stat cards use shadcn Card component with bg-card/border/shadow-sm instead of custom div"
    - "Empty state greeting also wrapped in Card with text-page-title token"
    - "Skeleton loading states use xl:grid-cols-2 and gap-card-gap matching the actual layout"
    - "Stat card values use text-stat token (28px) instead of text-3xl (30px)"
  artifacts:
    - path: "components/dashboard/dashboard-content.tsx"
      provides: "Greeting card wrapping, grid breakpoint xl, skeleton updates"
      contains: "text-page-title"
    - path: "components/dashboard/daily-snapshot.tsx"
      provides: "StatCard using shadcn Card, design token classes"
      contains: "text-muted-foreground"
    - path: "components/dashboard/motivation-message.tsx"
      provides: "Motivation wrapped in Card component"
      contains: "CardContent"
    - path: "app/dashboard/loading.tsx"
      provides: "Skeleton with updated grid breakpoints"
      contains: "xl:grid-cols-2"
    - path: "tests/components/dashboard/daily-snapshot.test.tsx"
      provides: "Updated test assertions for new token classes"
      contains: "text-primary"
  key_links:
    - from: "components/dashboard/daily-snapshot.tsx"
      to: "components/ui/card.tsx"
      via: "import { Card, CardContent }"
      pattern: "import.*Card.*from.*ui/card"
    - from: "components/dashboard/motivation-message.tsx"
      to: "components/ui/card.tsx"
      via: "import { Card, CardContent }"
      pattern: "import.*Card.*from.*ui/card"
---

<objective>
Migrate the dashboard's core structural components to the card-on-gray design system: wrap greeting and motivation in Cards, convert stat cards from custom divs to shadcn Card, update typography tokens, and align skeleton loading states.

Purpose: Establish the primary visual transformation -- white cards floating on the gray bg-page canvas -- for the dashboard's most prominent sections (greeting, stats, motivation).
Output: 4 migrated component files, 1 updated skeleton, 1 updated test file.
</objective>

<execution_context>
@/home/xingdi/.claude/get-shit-done/workflows/execute-plan.md
@/home/xingdi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-dashboard-page-migration/05-RESEARCH.md
@.planning/phases/04-page-header-content-layout/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate dashboard-content.tsx greeting, grid, and skeleton</name>
  <files>
    components/dashboard/dashboard-content.tsx
    app/dashboard/loading.tsx
  </files>
  <action>
In `components/dashboard/dashboard-content.tsx`:

1. **Add Card import** -- `Card` and `CardContent` are already imported. No change needed.

2. **Wrap empty state greeting (lines 160-167) in Card:**
   - Replace the bare `<div className="space-y-2">` wrapping the h1+p with:
     ```
     <Card>
       <CardContent className="py-5">
         <h1 className="text-page-title tracking-tight">
           {getGreeting()}, {userName}! wave-emoji
         </h1>
         <p className="mt-1 text-muted-foreground">{t("welcome")}</p>
       </CardContent>
     </Card>
     ```
   - Remove `font-display text-3xl font-bold` from h1 (text-page-title token includes fontWeight: 700 and letterSpacing: -0.025em). Keep `tracking-tight` for the extra tightness.

3. **Wrap main greeting (lines 221-226) in Card** -- same pattern as empty state greeting above.

4. **Update main content grid breakpoint (line 266):**
   - Change `grid gap-6 lg:grid-cols-2` to `grid gap-card-gap xl:grid-cols-2`
   - Per locked decision: habits/tasks grid breakpoint shifts from lg (1024px) to xl (1280px) for sidebar width. Gap migrates from gap-6 (24px) to gap-card-gap (16px).

5. **Update outer spacing:**
   - Change `space-y-8` on the outermost div (line 219 and line 160) to `space-y-6` -- tighter vertical rhythm consistent with card-gap token. (Claude's discretion: 32px between major sections feels more cohesive with 16px card gaps.)

6. **Update DashboardSkeleton (lines 288-337):**
   - Wrap greeting skeleton in a Card-like structure: `<Card><CardContent className="py-5"><Skeleton .../>...</CardContent></Card>`
   - Motivation skeleton: wrap `<Skeleton className="h-16 w-full rounded-lg" />` in `<Card><CardContent className="py-4">...</CardContent></Card>`
   - Stats skeleton grid (line 303): change `gap-4` to `gap-card-gap`
   - Content grid skeleton (line 311): change `grid gap-6 lg:grid-cols-2` to `grid gap-card-gap xl:grid-cols-2`
   - Update outer `space-y-8` to `space-y-6` to match live layout

In `app/dashboard/loading.tsx`:
   - Same skeleton updates as DashboardSkeleton above:
   - Wrap greeting skeleton in Card
   - Wrap motivation skeleton in Card
   - Stats grid: change `gap-4` to `gap-card-gap`
   - Content grid: change `gap-6 lg:grid-cols-2` to `gap-card-gap xl:grid-cols-2`
   - Outer `space-y-8` to `space-y-6`
  </action>
  <verify>
Run `pnpm build` -- no TypeScript errors. Run `pnpm lint` -- no lint errors.
  </verify>
  <done>
Greeting sections (both empty and main state) render inside Card components with text-page-title typography. Grid breakpoint is xl:grid-cols-2 with gap-card-gap. Both skeleton components (DashboardSkeleton and loading.tsx) match the migrated layout structure.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate daily-snapshot.tsx stat cards and motivation-message.tsx</name>
  <files>
    components/dashboard/daily-snapshot.tsx
    components/dashboard/motivation-message.tsx
    tests/components/dashboard/daily-snapshot.test.tsx
  </files>
  <action>
In `components/dashboard/daily-snapshot.tsx`:

1. **Add imports:**
   - Add `import { Card, CardContent } from "@/components/ui/card";` at the top.

2. **Migrate StatCard component (lines 20-51):**
   - Replace the outer `<div data-testid="stat-card" className="min-w-0 rounded-xl border border-slate-200 dark:border-slate-700 p-4 bg-white dark:bg-slate-900 shadow-sm">` with:
     ```
     <Card data-testid="stat-card" className="min-w-0 gap-0 py-0 shadow-sm">
       <CardContent className="p-4">
     ```
   - Close with `</CardContent></Card>` instead of `</div>`.
   - shadcn Card provides bg-card, text-card-foreground, rounded-xl, border, shadow-sm by default. The `gap-0 py-0` overrides Card's default gap-6 and py-6 which would add excess whitespace.

3. **Migrate StatCard text colors:**
   - `text-slate-500 dark:text-slate-400` (lines 28, 31) -> `text-muted-foreground`
   - `text-emerald-500` (line 37, positive trend) -> `text-primary`
   - Keep `text-red-500` (negative trend) as-is -- it's semantic.

4. **Migrate StatCard value typography:**
   - `font-display text-3xl font-bold` (line 29) -> `text-stat` (text-stat token includes fontWeight: 700, so remove font-bold and font-display)

5. **Migrate DailySnapshot section heading:**
   - `font-display text-lg font-semibold` (line 95) -> `text-section-heading` (includes fontWeight: 600)
   - Keep `font-display` if desired for the display font family. Actually text-section-heading only sets size/weight, not font-family. Keep `font-display` for the section heading.

6. **Migrate stat card icon colors (progress stat only):**
   - Line 104: `text-emerald-600 dark:text-emerald-400` -> `text-primary` (per research recommendation: primary IS the green accent)
   - Line 105: `bg-emerald-100 dark:bg-emerald-900/30` -> `bg-primary/10`
   - Keep blue stat icon (lines 98-99) as-is -- semantic accent color per decision
   - Keep orange stat icon (lines 112-113) as-is -- semantic accent color per decision

7. **Migrate stats grid gap:**
   - Line 96: `gap-4` -> `gap-card-gap` (16px, same value but uses token)

In `components/dashboard/motivation-message.tsx`:

1. **Add imports:**
   - Add `import { Card, CardContent } from "@/components/ui/card";`

2. **Wrap in Card:**
   - Replace the bare `<div className="rounded-lg bg-primary/5 dark:bg-primary/10 p-4 flex items-start gap-3">` with:
     ```
     <Card>
       <CardContent className="flex items-start gap-3 py-4">
     ```
   - Close with `</CardContent></Card>` instead of `</div>`.
   - Remove `rounded-lg bg-primary/5 dark:bg-primary/10 p-4` -- the Card provides bg-card, border, rounded-xl, shadow-sm. The motivation card uses standard Chameleon card styling per locked decision (same bg-card/border/shadow as other cards, no special accent background).

In `tests/components/dashboard/daily-snapshot.test.tsx`:

1. **Update trend color assertion (line 63):**
   - Change `expect(trendElement.parentElement).toHaveClass("text-emerald-500");` to `expect(trendElement.parentElement).toHaveClass("text-primary");`
  </action>
  <verify>
Run `pnpm test:run -- tests/components/dashboard/daily-snapshot.test.tsx` -- all 7 tests pass. Run `pnpm build` -- no errors. Run `pnpm lint` -- no lint errors.
  </verify>
  <done>
StatCard uses shadcn Card with bg-card/border/shadow-sm. All hardcoded slate/emerald colors replaced with muted-foreground/primary tokens. Progress stat icon uses text-primary/bg-primary/10. Blue and orange stat icons preserved as semantic colors. Motivation message wrapped in its own Card. Test assertions updated for new token class names.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `pnpm build` passes with zero errors
2. `pnpm lint` passes with zero errors
3. `pnpm test:run -- tests/components/dashboard/` -- all dashboard tests pass
4. No hardcoded `slate-200`, `slate-700`, `slate-900`, `slate-500`, `slate-400`, `emerald-500`, `emerald-600`, `emerald-400` remain in `dashboard-content.tsx`, `daily-snapshot.tsx`, or `motivation-message.tsx`
</verification>

<success_criteria>
- Greeting (both empty and main states) renders inside a white Card with text-page-title (24px) typography
- Motivation message renders inside its own separate Card (not merged with greeting) per locked decision
- StatCards use shadcn Card component with design tokens (bg-card, text-muted-foreground, text-stat, text-primary)
- Each stat card keeps its distinct accent color (blue, primary/green, orange) per locked decision
- Habits/tasks grid breakpoint is xl (1280px) per locked decision
- Stats grid breakpoint stays at md (768px) per locked decision
- All skeleton/loading states match the migrated layout
- Daily snapshot test passes with updated assertions
</success_criteria>

<output>
After completion, create `.planning/phases/05-dashboard-page-migration/05-01-SUMMARY.md`
</output>
