---
phase: 12-component-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/dashboard/motivation-message.tsx
  - components/dashboard/habit-checklist.tsx
  - tests/components/dashboard/motivation-message.test.tsx
  - tests/components/dashboard/habit-checklist.test.tsx
autonomous: true
requirements: [COMP-01, COMP-02]

must_haves:
  truths:
    - "Motivation message has a colored primary background, visually distinct from plain Cards"
    - "Habit checklist footer is pinned to the bottom of its card, aligned with TasksToday footer in the grid"
    - "Both components render correctly in light mode and dark mode"
  artifacts:
    - path: "components/dashboard/motivation-message.tsx"
      provides: "Colored background motivation message (not plain Card)"
      contains: "bg-primary"
    - path: "components/dashboard/habit-checklist.tsx"
      provides: "Flex-column card with bottom-pinned footer"
      contains: "flex-col"
  key_links:
    - from: "components/dashboard/dashboard-content.tsx"
      to: "components/dashboard/motivation-message.tsx"
      via: "MotivationMessage component usage"
      pattern: "<MotivationMessage"
    - from: "components/dashboard/dashboard-content.tsx"
      to: "components/dashboard/habit-checklist.tsx"
      via: "HabitChecklist in grid with TasksToday"
      pattern: "grid.*xl:grid-cols-2"
---

<objective>
Fix two visual regressions from the v2.0 redesign: restore the motivation message's colored background and pin the habit checklist footer to the bottom of its card.

Purpose: These are the last two component-level regressions blocking the v2.1 milestone from completion.
Output: Updated motivation-message.tsx and habit-checklist.tsx with corrected styles, plus passing tests.
</objective>

<execution_context>
@/home/xingdi/.claude/get-shit-done/workflows/execute-plan.md
@/home/xingdi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@components/dashboard/motivation-message.tsx
@components/dashboard/habit-checklist.tsx
@components/dashboard/dashboard-content.tsx
@tests/components/dashboard/motivation-message.test.tsx
@tests/components/dashboard/habit-checklist.test.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restore motivation message colored background</name>
  <files>
    components/dashboard/motivation-message.tsx
    tests/components/dashboard/motivation-message.test.tsx
  </files>
  <action>
In `motivation-message.tsx`, replace the plain `<Card>` wrapper with a styled `<div>` that uses a colored primary background:

1. Remove the `Card` and `CardContent` imports (no longer needed).
2. Replace the `<Card><CardContent className="...">` wrapper with:
   ```tsx
   <div className="rounded-xl bg-primary/5 dark:bg-primary/10 border border-primary/10 dark:border-primary/20 px-4 py-4">
   ```
   This gives the motivation message a subtle primary-tinted background that is visually distinct from the surrounding plain Cards, with slightly stronger tinting in dark mode for visibility.
3. Keep the inner flex layout (`flex items-start gap-3`) and the Lightbulb icon + message text unchanged.
4. The final JSX structure should be:
   ```tsx
   <div className="rounded-xl bg-primary/5 dark:bg-primary/10 border border-primary/10 dark:border-primary/20 px-4 py-4">
     <div className="flex items-start gap-3">
       <Lightbulb className="size-5 text-primary shrink-0 mt-0.5" />
       <p className="text-sm text-foreground/90">{message}</p>
     </div>
   </div>
   ```

In `motivation-message.test.tsx`, tests should still pass since they test text content, not Card structure. Run tests to confirm.
  </action>
  <verify>
Run `pnpm vitest run tests/components/dashboard/motivation-message.test.tsx` — all 7 tests pass.
Run `pnpm lint` — no new errors.
  </verify>
  <done>
Motivation message renders with a colored `bg-primary/5` background and `border-primary/10` border, visually distinct from plain Card components. All existing tests pass.
  </done>
</task>

<task type="auto">
  <name>Task 2: Pin habit checklist footer to card bottom</name>
  <files>
    components/dashboard/habit-checklist.tsx
    tests/components/dashboard/habit-checklist.test.tsx
  </files>
  <action>
In `habit-checklist.tsx`, make the Card use flex-column layout so the footer stays pinned to the bottom when the card is stretched by the CSS grid:

1. On the outermost `<Card>` element, add `className="flex flex-col"` to enable vertical flex layout. This makes the card stretch to fill the grid row height.
2. On the `<CardContent>` element, add `flex-1` to the className (alongside any existing classes) so the content area expands to fill available space. Also add `flex flex-col` so we can push the footer down.
3. Wrap the habit list `<div className="space-y-1">` and the footer `<div className="mt-4 pt-4 border-t">` in a fragment or restructure so that:
   - The habit list stays at natural height
   - The footer div gets `mt-auto` instead of `mt-4` to push it to the bottom of the flex container, while keeping `pt-4 border-t`
4. For the empty state (`totalCount === 0`), no changes needed — it centers content which works fine with flex.

The specific changes:
- `<Card>` → `<Card className="flex flex-col">`
- `<CardContent>` → `<CardContent className="flex-1 flex flex-col">`
- The `<>` fragment wrapping the habit list and footer: keep the habit list div as-is, change the footer div from `className="mt-4 pt-4 border-t"` to `className="mt-auto pt-4 border-t"`. This uses `mt-auto` to push the footer to the bottom of the flex column.

This ensures that when HabitChecklist and TasksToday are side-by-side in the `xl:grid-cols-2` grid, their footers align at the bottom regardless of content height differences.
  </action>
  <verify>
Run `pnpm vitest run tests/components/dashboard/habit-checklist.test.tsx` — all 6 tests pass.
Run `pnpm vitest run tests/components/dashboard` — all dashboard tests pass.
Run `pnpm lint` — no new errors.
  </verify>
  <done>
Habit checklist card uses `flex flex-col` layout with `mt-auto` on the footer, pinning "X of Y completed" to the bottom of the card. Cards in the same grid row have aligned footers regardless of habit count differences.
  </done>
</task>

</tasks>

<verification>
1. `pnpm vitest run tests/components/dashboard/` — all dashboard tests pass
2. `pnpm lint` — no lint errors
3. Visual check: motivation message has colored background (not plain card)
4. Visual check: habit checklist footer aligns with tasks-today footer in 2-column grid
5. Both components work in light mode and dark mode
</verification>

<success_criteria>
- Motivation message renders with `bg-primary/5` background instead of plain Card
- Habit checklist footer ("X of Y completed") is pinned to card bottom via flex layout
- All existing tests pass with no modifications needed
- No lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/12-component-fixes/12-01-SUMMARY.md`
</output>
