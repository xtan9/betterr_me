---
phase: 10-token-consistency
plan: 03
type: execute
wave: 2
depends_on:
  - "10-01"
files_modified:
  - components/tasks/task-card.tsx
  - components/tasks/task-form.tsx
  - components/tasks/task-detail-content.tsx
  - components/tasks/task-empty-state.tsx
  - components/hero.tsx
  - components/login-form.tsx
  - components/sign-up-form.tsx
  - components/forgot-password-form.tsx
  - components/update-password-form.tsx
  - components/settings/settings-content.tsx
  - components/habits/habits-page-content.tsx
  - components/habits/habit-list.tsx
  - components/tasks/tasks-page-content.tsx
  - components/tasks/task-list.tsx
  - app/dashboard/loading.tsx
autonomous: true
requirements:
  - TOKN-01
  - TOKN-02
must_haves:
  truths:
    - "Zero hardcoded Tailwind color classes remain in task component files"
    - "Zero hardcoded Tailwind color classes remain in auth form components"
    - "Zero hardcoded Tailwind color classes remain in hero and settings components"
    - "Card grid gaps in habit and task list pages use gap-card-gap token"
    - "All existing tests pass after migration"
  artifacts:
    - path: "components/tasks/task-card.tsx"
      provides: "Task card with semantic priority and category color tokens"
      contains: "priority-"
    - path: "components/tasks/task-form.tsx"
      provides: "Task form with semantic category and priority color tokens"
      contains: "category-"
    - path: "components/habits/habits-page-content.tsx"
      provides: "Habit list grid using gap-card-gap spacing token"
      contains: "gap-card-gap"
  key_links:
    - from: "components/tasks/task-card.tsx"
      to: "tailwind.config.ts"
      via: "Tailwind token utilities"
      pattern: "text-priority-"
    - from: "components/habits/habits-page-content.tsx"
      to: "tailwind.config.ts"
      via: "Spacing token utilities"
      pattern: "gap-card-gap"
---

<objective>
Replace all remaining hardcoded Tailwind color classes in task, auth, hero, and settings components. Replace hardcoded layout-level spacing with spacing tokens where applicable.

Purpose: Complete the color token migration (TOKN-01) for all remaining component files, and ensure layout-level grid gaps use the spacing token (TOKN-02).

Output: All component files outside `components/ui/` use semantic tokens for colors and layout spacing. Zero hardcoded color classes remain.
</objective>

<execution_context>
@/home/xingdi/.claude/get-shit-done/workflows/execute-plan.md
@/home/xingdi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-token-consistency/10-01-SUMMARY.md
@.planning/milestones/v2.0-phases/01-design-token-extraction-css-foundation/DESIGN-TOKENS.md
@app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate task, auth, hero, and settings components</name>
  <files>
    components/tasks/task-card.tsx
    components/tasks/task-form.tsx
    components/tasks/task-detail-content.tsx
    components/tasks/task-empty-state.tsx
    components/hero.tsx
    components/login-form.tsx
    components/sign-up-form.tsx
    components/forgot-password-form.tsx
    components/update-password-form.tsx
    components/settings/settings-content.tsx
  </files>
  <action>
Replace every hardcoded Tailwind color class in these files with semantic tokens:

**components/tasks/task-card.tsx:**
Category colors map:
- `"bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400"` → `"bg-category-learning-muted text-category-learning"`
- `"bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400"` → `"bg-category-wellness-muted text-category-wellness"`
- `"bg-amber-100 text-amber-600 dark:bg-amber-900/50 dark:text-amber-400"` → `"bg-category-productivity-muted text-category-productivity"`
- `"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"` → `"bg-category-other-muted text-category-other"`

Note: task categories (work, personal, shopping, other) map to the closest habit category token (learning=blue/work, wellness=purple/personal, productivity=amber/shopping, other=slate/other). This mapping is semantic since they represent the same visual intent.

Priority colors map:
- `0: "text-slate-400"` → `0: "text-priority-none"`
- `1: "text-green-500"` → `1: "text-priority-low"`
- `2: "text-yellow-500"` → `2: "text-priority-medium"`
- `3: "text-red-500"` → `3: "text-priority-high"`

Fallback: `"text-slate-400"` → `"text-priority-none"`

Overdue text: `"text-red-500 font-medium"` → `"text-status-error font-medium"`

**components/tasks/task-form.tsx:**
Category colorClass entries:
- `"data-[state=on]:bg-blue-500 data-[state=on]:text-white"` → `"data-[state=on]:bg-category-learning data-[state=on]:text-white"`
- `"data-[state=on]:bg-purple-500 data-[state=on]:text-white"` → `"data-[state=on]:bg-category-wellness data-[state=on]:text-white"`
- `"data-[state=on]:bg-amber-500 data-[state=on]:text-white"` → `"data-[state=on]:bg-category-productivity data-[state=on]:text-white"`
- `"data-[state=on]:bg-slate-500 data-[state=on]:text-white"` → `"data-[state=on]:bg-category-other data-[state=on]:text-white"`

Priority colorClass entries:
- `"text-slate-400"` → `"text-priority-none"`
- `"text-green-500"` → `"text-priority-low"`
- `"text-yellow-500"` → `"text-priority-medium"`
- `"text-red-500"` → `"text-priority-high"`

**components/tasks/task-detail-content.tsx:**
Category color map:
- `"bg-blue-500"` (work) → `"bg-category-learning"`
- `"bg-purple-500"` (personal) → `"bg-category-wellness"`
- `"bg-amber-500"` (shopping) → `"bg-category-productivity"`
- `"bg-slate-500"` (other) → `"bg-category-other"`

Priority colors map:
- Same as task-card.tsx mapping above

Fallback priority: `"text-slate-400"` → `"text-priority-none"`
Fallback category: `"bg-slate-500"` → `"bg-category-other"`

Delete button: `"bg-destructive text-white"` → `"bg-destructive text-destructive-foreground"` (use token)

**components/tasks/task-empty-state.tsx:**
- Icon colors: `"text-slate-400"` → `"text-muted-foreground"`, `"text-amber-500"` → `"text-status-warning"`
- Icon backgrounds: `"bg-slate-100"` → `"bg-muted"`, `"bg-amber-100"` → `"bg-status-warning/20"`
- Celebration gradient: `"bg-gradient-to-b from-amber-50/50 to-transparent"` → `"bg-gradient-to-b from-empty-state-celebration-bg/50 to-transparent"`

**components/hero.tsx:**
- Check icons: `"text-green-600"` → `"text-status-success"` (all 3 instances)
- The CTA button already uses `bg-primary text-white` which is acceptable (`text-white` on primary buttons is fine since `--primary-foreground` is white in light mode). Keep as-is.

**Auth form components (login-form, sign-up-form, forgot-password-form, update-password-form):**
- Error text: `"text-red-500"` → `"text-status-error"` (all instances in all 4 files)

**components/settings/settings-content.tsx:**
- Success checkmark: `"text-green-500"` → `"text-status-success"`

Do NOT touch `components/ui/` files. Preserve all existing functionality, props, and component structure.
  </action>
  <verify>
Run `pnpm test:run -- --testPathPattern="task|hero|login|sign-up|forgot|update-password|settings"` to verify tests pass. Run `pnpm lint`.
  </verify>
  <done>
Zero hardcoded Tailwind color classes remain in task, auth, hero, or settings component files. All priority and category colors use semantic tokens. Error text uses `text-status-error`. Success indicators use `text-status-success`.
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace hardcoded layout-level spacing with spacing tokens</name>
  <files>
    components/habits/habits-page-content.tsx
    components/habits/habit-list.tsx
    components/tasks/tasks-page-content.tsx
    components/tasks/task-list.tsx
    app/dashboard/loading.tsx
  </files>
  <action>
Replace hardcoded `gap-4` in card grid layouts with the `gap-card-gap` spacing token. The `--spacing-card-gap` token is `1rem` which equals `gap-4`, so this is a semantic change, not a visual one.

**Only replace `gap-4` in grid layouts that display cards** (not in flex layouts for buttons, form elements, or inline content).

**components/habits/habits-page-content.tsx:**
- `"grid gap-4 md:grid-cols-2 lg:grid-cols-3"` → `"grid gap-card-gap md:grid-cols-2 lg:grid-cols-3"`

**components/habits/habit-list.tsx:**
- `"grid gap-4 md:grid-cols-2 lg:grid-cols-3"` → `"grid gap-card-gap md:grid-cols-2 lg:grid-cols-3"`

**components/tasks/tasks-page-content.tsx:**
- `"grid gap-4 md:grid-cols-2 lg:grid-cols-3"` → `"grid gap-card-gap md:grid-cols-2 lg:grid-cols-3"`

**components/tasks/task-list.tsx:**
- `"grid gap-4 md:grid-cols-2 lg:grid-cols-3"` → `"grid gap-card-gap md:grid-cols-2 lg:grid-cols-3"`

**app/dashboard/loading.tsx:**
Already uses `gap-card-gap` in some places, but verify ALL grid gaps for cards use the token. If any card-level `gap-4` remains, replace with `gap-card-gap`.

Do NOT replace `gap-4` in:
- Flex layouts for buttons or form fields (e.g., `"flex gap-4"` for button groups)
- Section-level spacing that isn't between cards (e.g., `"flex flex-col gap-4"` for page sections)
- Any `gap-2`, `gap-1`, `gap-3` or other micro-spacing values

The key heuristic: if the gap is between Card components in a grid, use `gap-card-gap`. Everything else stays as-is.
  </action>
  <verify>
Run `pnpm test:run` to verify all tests pass. Run `pnpm lint`. Run `pnpm build`.
  </verify>
  <done>
All card grid layouts in habit and task list pages use `gap-card-gap` spacing token. Micro-spacing remains as plain Tailwind utilities. Layout-level spacing is consistent across the codebase.
  </done>
</task>

</tasks>

<verification>
1. `pnpm test:run` — all tests pass
2. `pnpm lint` — no lint errors
3. `pnpm build` — production build succeeds
4. Verify zero hardcoded color classes in task/auth/hero/settings files:
   `grep -rn 'bg-slate\|bg-gray\|text-slate\|text-gray\|text-red-\|text-green-\|text-yellow-\|text-blue-\|text-orange-\|text-amber-\|text-rose-\|text-purple-\|bg-rose-\|bg-purple-\|bg-blue-\|bg-amber-' components/tasks/ components/hero.tsx components/login-form.tsx components/sign-up-form.tsx components/forgot-password-form.tsx components/update-password-form.tsx components/settings/`
5. Verify card grids use spacing token:
   `grep -rn 'gap-card-gap' components/habits/ components/tasks/ app/dashboard/`
</verification>

<success_criteria>
- Zero hardcoded Tailwind color classes in task, auth, hero, or settings component files
- All card grid layouts use gap-card-gap spacing token
- All existing tests pass
- Production build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/10-token-consistency/10-03-SUMMARY.md`
</output>
