---
phase: 10-token-consistency
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
  - tailwind.config.ts
autonomous: true
requirements:
  - TOKN-01
must_haves:
  truths:
    - "Semantic CSS variables exist for all 5 habit categories (health, wellness, learning, productivity, other) with light and dark values"
    - "Semantic CSS variables exist for all 4 priority levels (none, low, medium, high) with light and dark values"
    - "Semantic CSS variables exist for status indicators (success, warning, info, error, streak) with light and dark values"
    - "Every new CSS variable is registered as a Tailwind utility in tailwind.config.ts"
    - "Existing design tokens remain unchanged"
  artifacts:
    - path: "app/globals.css"
      provides: "Semantic color CSS variables for categories, priorities, and status indicators"
      contains: "--category-health"
    - path: "tailwind.config.ts"
      provides: "Tailwind color utility registration for all new semantic tokens"
      contains: "category"
  key_links:
    - from: "tailwind.config.ts"
      to: "app/globals.css"
      via: "CSS variable references"
      pattern: "hsl\\(var\\(--category"
---

<objective>
Define semantic color tokens for every hardcoded color pattern remaining in the codebase: habit categories, task priorities, status indicators, and neutral semantic colors.

Purpose: Create the CSS variable + Tailwind utility foundation so component files can reference semantic tokens instead of hardcoded Tailwind color classes. This is the prerequisite for Plans 02 and 03.

Output: Updated `globals.css` with new CSS variables (light + dark values) and `tailwind.config.ts` with Tailwind utility registrations.
</objective>

<execution_context>
@/home/xingdi/.claude/get-shit-done/workflows/execute-plan.md
@/home/xingdi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/milestones/v2.0-phases/01-design-token-extraction-css-foundation/DESIGN-TOKENS.md
@app/globals.css
@tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add semantic color CSS variables to globals.css</name>
  <files>app/globals.css</files>
  <action>
Add new CSS custom properties to both `:root` and `.dark` sections in `app/globals.css`. Place them after the existing `--highlight` token block. Follow the established pattern: raw HSL values (space-separated numbers, no `hsl()` wrapper).

**Category colors** (used for habit/task category badges and icons):
```
/* === Category colors === */
--category-health: 350 80% 55%;        /* rose-ish */
--category-health-muted: 350 80% 95%;  /* rose-50-ish bg */
--category-wellness: 270 60% 55%;      /* purple-ish */
--category-wellness-muted: 270 60% 95%;
--category-learning: 215 75% 55%;      /* blue-ish */
--category-learning-muted: 215 75% 95%;
--category-productivity: 40 85% 55%;   /* amber-ish */
--category-productivity-muted: 40 85% 95%;
--category-other: 215 15% 55%;         /* slate-ish */
--category-other-muted: 215 15% 95%;
```

Dark mode values (desaturated, adapted for dark surfaces):
```
--category-health: 350 65% 60%;
--category-health-muted: 350 40% 18%;
--category-wellness: 270 50% 60%;
--category-wellness-muted: 270 30% 18%;
--category-learning: 215 60% 60%;
--category-learning-muted: 215 35% 18%;
--category-productivity: 40 70% 60%;
--category-productivity-muted: 40 40% 18%;
--category-other: 215 10% 55%;
--category-other-muted: 215 10% 18%;
```

**Priority colors** (used for task priority indicators):
```
/* === Priority colors === */
--priority-none: 0 0% 65%;         /* muted gray */
--priority-low: 142 70% 45%;       /* green */
--priority-medium: 48 95% 50%;     /* yellow */
--priority-high: 0 72% 55%;        /* red */
```

Dark mode:
```
--priority-none: 0 0% 50%;
--priority-low: 142 55% 50%;
--priority-medium: 48 80% 55%;
--priority-high: 0 60% 55%;
```

**Status/indicator colors** (used for contextual accents):
```
/* === Status indicators === */
--status-error: 0 84% 60%;           /* red - form errors, negative trends */
--status-success: 142 70% 45%;       /* green - success states */
--status-warning: 38 92% 50%;        /* orange/amber - warnings, paused */
--status-info: 215 75% 55%;          /* blue - informational */
--status-streak: 25 95% 55%;         /* orange - fire/streak */
```

Dark mode:
```
--status-error: 0 62% 55%;
--status-success: 142 55% 50%;
--status-warning: 38 75% 55%;
--status-info: 215 60% 55%;
--status-streak: 25 80% 58%;
```

**Weekly insight (blue info card)**:
```
/* === Info card (weekly insights) === */
--info-card-bg: 224 75% 97%;           /* blue-50-ish */
--info-card-bg-to: 230 60% 96%;       /* indigo-50-ish gradient end */
--info-card-border: 215 60% 80%;      /* blue-200-ish */
--info-card-text: 215 70% 25%;        /* blue-900-ish */
--info-card-text-secondary: 215 60% 35%; /* blue-700-ish */
--info-card-icon: 215 75% 45%;        /* blue-600-ish */
--info-card-button: 215 75% 55%;      /* blue-500 */
--info-card-button-hover: 215 75% 40%; /* blue-700 */
--info-card-button-hover-bg: 215 75% 95%; /* blue-100-ish */
```

Dark mode:
```
--info-card-bg: 215 50% 12%;
--info-card-bg-to: 230 40% 12%;
--info-card-border: 215 40% 30%;
--info-card-text: 215 50% 85%;
--info-card-text-secondary: 215 45% 70%;
--info-card-icon: 215 50% 65%;
--info-card-button: 215 50% 55%;
--info-card-button-hover: 215 50% 70%;
--info-card-button-hover-bg: 215 40% 20%;
```

**Absence card variant colors**:
```
/* === Absence card variants === */
--absence-warning-bg: 45 90% 96%;
--absence-warning-icon: 38 92% 50%;
--absence-warning-title: 38 70% 35%;
--absence-info-bg: 215 75% 97%;
--absence-info-icon: 215 75% 55%;
--absence-info-title: 215 60% 35%;
--absence-caution-bg: 25 90% 96%;
--absence-caution-icon: 25 95% 55%;
--absence-caution-title: 25 70% 35%;
```

Dark mode:
```
--absence-warning-bg: 45 40% 12%;
--absence-warning-icon: 38 75% 55%;
--absence-warning-title: 38 55% 65%;
--absence-info-bg: 215 35% 12%;
--absence-info-icon: 215 60% 55%;
--absence-info-title: 215 50% 65%;
--absence-caution-bg: 25 40% 12%;
--absence-caution-icon: 25 80% 58%;
--absence-caution-title: 25 55% 65%;
```

**Stat icon colors** (dashboard stat icons):
```
/* === Stat icon colors === */
--stat-icon-blue: 215 75% 45%;
--stat-icon-blue-bg: 215 75% 93%;
--stat-icon-orange: 25 90% 45%;
--stat-icon-orange-bg: 25 90% 93%;
```

Dark mode:
```
--stat-icon-blue: 215 60% 60%;
--stat-icon-blue-bg: 215 40% 20%;
--stat-icon-orange: 25 80% 58%;
--stat-icon-orange-bg: 25 40% 20%;
```

**Empty state gradients**:
```
/* === Empty state === */
--empty-state-celebration-bg: 45 90% 97%;
```

Dark mode:
```
--empty-state-celebration-bg: 45 30% 14%;
```

Ensure all values follow the raw HSL pattern (e.g., `350 80% 55%`), matching the existing convention.
  </action>
  <verify>
Run `pnpm build` to confirm CSS is valid and no build errors. The file should parse without issues.
  </verify>
  <done>
All semantic CSS variables are defined in both `:root` and `.dark` sections of `globals.css`, following the raw HSL convention.
  </done>
</task>

<task type="auto">
  <name>Task 2: Register semantic color tokens as Tailwind utilities</name>
  <files>tailwind.config.ts</files>
  <action>
Add all new CSS variables as Tailwind color utilities in `tailwind.config.ts` under `theme.extend.colors`. Follow the existing pattern of `"hsl(var(--token-name))"`.

Add these nested color objects:

```ts
category: {
  health: {
    DEFAULT: "hsl(var(--category-health))",
    muted: "hsl(var(--category-health-muted))",
  },
  wellness: {
    DEFAULT: "hsl(var(--category-wellness))",
    muted: "hsl(var(--category-wellness-muted))",
  },
  learning: {
    DEFAULT: "hsl(var(--category-learning))",
    muted: "hsl(var(--category-learning-muted))",
  },
  productivity: {
    DEFAULT: "hsl(var(--category-productivity))",
    muted: "hsl(var(--category-productivity-muted))",
  },
  other: {
    DEFAULT: "hsl(var(--category-other))",
    muted: "hsl(var(--category-other-muted))",
  },
},
priority: {
  none: "hsl(var(--priority-none))",
  low: "hsl(var(--priority-low))",
  medium: "hsl(var(--priority-medium))",
  high: "hsl(var(--priority-high))",
},
status: {
  error: "hsl(var(--status-error))",
  success: "hsl(var(--status-success))",
  warning: "hsl(var(--status-warning))",
  info: "hsl(var(--status-info))",
  streak: "hsl(var(--status-streak))",
},
"info-card": {
  DEFAULT: "hsl(var(--info-card-bg))",
  to: "hsl(var(--info-card-bg-to))",
  border: "hsl(var(--info-card-border))",
  text: "hsl(var(--info-card-text))",
  "text-secondary": "hsl(var(--info-card-text-secondary))",
  icon: "hsl(var(--info-card-icon))",
  button: "hsl(var(--info-card-button))",
  "button-hover": "hsl(var(--info-card-button-hover))",
  "button-hover-bg": "hsl(var(--info-card-button-hover-bg))",
},
absence: {
  "warning-bg": "hsl(var(--absence-warning-bg))",
  "warning-icon": "hsl(var(--absence-warning-icon))",
  "warning-title": "hsl(var(--absence-warning-title))",
  "info-bg": "hsl(var(--absence-info-bg))",
  "info-icon": "hsl(var(--absence-info-icon))",
  "info-title": "hsl(var(--absence-info-title))",
  "caution-bg": "hsl(var(--absence-caution-bg))",
  "caution-icon": "hsl(var(--absence-caution-icon))",
  "caution-title": "hsl(var(--absence-caution-title))",
},
"stat-icon": {
  blue: "hsl(var(--stat-icon-blue))",
  "blue-bg": "hsl(var(--stat-icon-blue-bg))",
  orange: "hsl(var(--stat-icon-orange))",
  "orange-bg": "hsl(var(--stat-icon-orange-bg))",
},
"empty-state": {
  "celebration-bg": "hsl(var(--empty-state-celebration-bg))",
},
```

Place these after the existing `sidebar` color block. Ensure no syntax errors.
  </action>
  <verify>
Run `pnpm build` to verify Tailwind config parses correctly and generates the expected utility classes. No build errors.
  </verify>
  <done>
All semantic color tokens are registered as Tailwind utilities. Classes like `bg-category-health`, `text-priority-high`, `text-status-error`, `bg-info-card`, `bg-absence-warning-bg`, `text-stat-icon-blue`, `bg-empty-state-celebration-bg` are available for use.
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` passes with no errors
2. `pnpm lint` passes with no errors
3. All existing tests still pass: `pnpm test:run`
4. New CSS variables visible in both `:root` and `.dark` blocks
5. Tailwind config registers all new color utilities
</verification>

<success_criteria>
- globals.css contains all new semantic CSS variables in both light and dark mode sections
- tailwind.config.ts registers all new tokens as Tailwind color utilities
- Build succeeds with no errors
- No existing functionality broken
</success_criteria>

<output>
After completion, create `.planning/phases/10-token-consistency/10-01-SUMMARY.md`
</output>
